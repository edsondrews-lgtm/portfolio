<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portf√≥lio ‚Äî Engenharia de Produ√ß√£o</title>
  <style>
    :root{
      --bg:#0f172a;          /* slate-900 */
      --card:#111827;        /* gray-900 */
      --muted:#94a3b8;       /* slate-400 */
      --text:#e5e7eb;        /* gray-200 */
      --accent:#22d3ee;      /* cyan-400 */
      --accent-2:#a78bfa;    /* violet-400 */
      --ring:#334155;        /* slate-700 */
    }
    *{box-sizing:border-box}
    html,body{margin:0; background:linear-gradient(180deg,#0b1024, #0f172a 40%); color:var(--text); font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";}
    .container{max-width:1100px; margin:0 auto; padding:24px}
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(15,23,42,.85), rgba(15,23,42,.55));
      border-bottom:1px solid var(--ring);
    }
    .header-inner{display:flex; gap:16px; align-items:center; justify-content:space-between; padding:12px 24px}
    .brand{display:flex; gap:12px; align-items:center}
    .logo{width:40px; height:40px; border-radius:12px; background: radial-gradient(120% 120% at 10% 10%, var(--accent), var(--accent-2)); box-shadow:0 10px 30px rgba(167,139,250,.35)}
    h1{font-size:clamp(18px,3vw,24px); margin:0}
    .subtitle{color:var(--muted); font-size:14px}

    .controls{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .control{background:var(--card); border:1px solid var(--ring); color:var(--text); border-radius:12px; padding:10px 12px; display:flex; gap:8px; align-items:center}
    .control input, .control select{background:transparent; border:none; color:var(--text); outline:none}
    .btn{cursor:pointer; background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#0b1024; border:none; border-radius:12px; padding:10px 14px; font-weight:600}

    /* Chips de anos */
    .years{display:flex; gap:10px; flex-wrap:wrap; padding:18px 0}
    .chip{cursor:pointer; background:rgba(148,163,184,.08); color:var(--text); border:1px solid var(--ring); padding:8px 12px; border-radius:999px; font-size:14px}
    .chip.active{background:linear-gradient(90deg, rgba(34,211,238,.2), rgba(167,139,250,.2)); border-color:transparent}

    /* Grid */
    .grid{display:grid; grid-template-columns:repeat(12,1fr); gap:16px}
    @media (max-width:900px){ .grid{grid-template-columns:repeat(6,1fr)} }
    @media (max-width:640px){ .grid{grid-template-columns:repeat(4,1fr)} }

    .card{background:linear-gradient(180deg, rgba(30,41,59,.6), rgba(2,6,23,.8)); border:1px solid var(--ring); border-radius:20px; overflow:hidden; box-shadow: 0 10px 30px rgba(2,6,23,.4)}
    .card-inner{padding:16px}
    .meta{display:flex; gap:10px; align-items:center; color:var(--muted); font-size:12px}
    .title{font-size:18px; font-weight:700; margin:8px 0 4px}
    .desc{color:#cbd5e1; font-size:14px; line-height:1.5}
    .tag{display:inline-flex; gap:6px; align-items:center; background:rgba(34,211,238,.15); color:var(--accent); border:1px solid rgba(34,211,238,.35); padding:4px 8px; border-radius:999px; font-size:12px}

    /* Imagens */
    .media{position:relative; width:100%; aspect-ratio: 16/9; overflow:hidden; cursor:zoom-in}
    .media img{width:100%; height:100%; object-fit:cover; object-position:center; display:block;}
    .media .cap{position:absolute; bottom:8px; left:8px; right:8px; background: linear-gradient(180deg, rgba(2,6,23,0), rgba(2,6,23,.85)); color:#e2e8f0; font-size:12px; padding:10px; border-radius:12px}

    /* Spans para variar layout */
    .span-12{grid-column:span 12}
    .span-8{grid-column:span 8}
    .span-6{grid-column:span 6}
    .span-4{grid-column:span 4}
    .span-3{grid-column:span 3}
    @media (max-width:900px){ .span-8{grid-column:span 6} }
    @media (max-width:640px){ .span-8,.span-6,.span-4,.span-3{grid-column:span 4} }

    /* Galeria (lightbox) */
    #lightbox{position:fixed; inset:0; background:rgba(0,0,0,.9); display:none; align-items:center; justify-content:center; z-index:9999}
    #lightbox.open{display:flex}
    #lightbox img{max-width:90vw; max-height:85vh; border-radius:14px; box-shadow:0 20px 60px rgba(0,0,0,.6)}
    #lightbox .cap{position:fixed; bottom:24px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,.6); color:#e5e7eb; padding:8px 12px; border-radius:10px; font-size:14px; max-width:90vw}
    #lightbox .ctrl{position:fixed; top:16px; right:16px; display:flex; gap:8px}
    #lightbox button{cursor:pointer; background:rgba(255,255,255,.12); color:#fff; border:1px solid rgba(255,255,255,.2); border-radius:10px; padding:10px 12px; font-size:16px}
    #lightbox .nav{position:fixed; inset:0; display:flex; align-items:center; justify-content:space-between; pointer-events:none}
    #lightbox .nav button{pointer-events:auto; background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.2)}

    /* Rodap√© e impress√£o */
    footer{margin:40px 0; color:var(--muted); text-align:center; font-size:12px}
    @media print{
      header, .controls, .years, #actions{display:none}
      body{background:white; color:black}
      .card{break-inside:avoid}
    }
  </style>
</head>
<body>
  <header>
    <div class="header-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Portf√≥lio ‚Äî Engenharia de Produ√ß√£o</h1>
          <div class="subtitle">Registros oficiais de eventos ‚Ä¢ Unoesc</div>
        </div>
      </div>
      <div class="controls">
        <label class="control" title="Filtrar por palavra-chave">üîé
          <input id="q" placeholder="Buscar evento, local, palavra..." />
        </label>
        <label class="control" title="Ordenar">‚ÜïÔ∏è
          <select id="sort">
            <option value="new">Mais recentes</option>
            <option value="old">Mais antigos</option>
            <option value="az">A ‚Üí Z</option>
            <option value="za">Z ‚Üí A</option>
          </select>
        </label>
        <button id="print" class="btn" title="Imprimir / Salvar em PDF">üñ®Ô∏è Exportar PDF</button>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="years" id="years"></div>
    <div class="grid" id="grid"></div>

    <div id="actions" style="margin-top:24px; display:flex; gap:12px; flex-wrap:wrap; align-items:center">
      <button class="btn" id="addSample">‚ûï Adicionar exemplos</button>
      <span class="subtitle">Dica: edite a lista <strong>events</strong> no c√≥digo para inserir seus registros reais.</span>
    </div>

    <footer>Engenharia de Produ√ß√£o ‚Äî Unoesc ‚Ä¢ Portf√≥lio acad√™mico ‚Ä¢ <span id="yearNow"></span></footer>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" aria-hidden="true">
    <div class="nav">
      <button id="lbPrev" title="Anterior">‚ü®</button>
      <button id="lbNext" title="Pr√≥xima">‚ü©</button>
    </div>
    <div class="ctrl">
      <button id="lbClose" title="Fechar (Esc)">‚úï</button>
    </div>
    <img id="lbImg" alt="" />
    <div class="cap" id="lbCap"></div>
  </div>

  <script>
    // =============================
    // COMO USAR:
    // - Coloque suas fotos em /assets/ANO/arquivo.jpg (ou direto em /assets/)
    // - Preencha o array events[] abaixo
    // - Cada evento: id, title, date(YYYY-MM-DD), location, year, paragraph, photos:[{url, caption}], tags:[]
    // =============================

    let events = [
      // EXEMPLO com suas fotos (troque os nomes dos arquivos se precisar)
      {
        id:'ev-2025-01-abertura',
        title:"Abertura do Semestre 2025/1 ‚Äî Aula Inaugural & Espet√°culo 'Para Contar Estrelas' (Grupo Cirandela)",
        date:'2025-02-21',
        location:'Maravilha/SC ‚Äî plen√°rio municipal',
        year:'2025',
        paragraph:'Abertura oficial do semestre do curso de Engenharia de Produ√ß√£o com mensagem de boas-vindas e fala do Prof. Victor (reitor). Na sequ√™ncia, o Grupo Cirandela apresentou o espet√°culo ‚ÄúPara Contar Estrelas‚Äù, promovendo integra√ß√£o entre calouros e veteranos.',
        tags:['aula-inaugural','para-contar-estrelas','grupo-cirandela','integra√ß√£o'],
        photos:[
          {url:'assets/2025/abertura-2025-1-01.jpg', caption:'Cena do espet√°culo ‚ÄúPara Contar Estrelas‚Äù ‚Äî Grupo Cirandela.'},
          {url:'assets/2025/abertura-2025-1-02.jpg', caption:'Intera√ß√£o dos artistas com o p√∫blico.'},
          {url:'assets/2025/abertura-2025-1-03.jpg', caption:'Momentos do espet√°culo no palco.'},
          {url:'assets/2025/abertura-2025-1-04.jpg', caption:'Chegada para a abertura do semestre ‚Äî Unoesc Maravilha.'},
          {url:'assets/2025/abertura-2025-1-05.jpg', caption:'Autoridades e equipe acad√™mica na abertura oficial.'}
        ]
      }
    ];

    // Utilit√°rio para data pt-BR
    const fmtDate = (iso) => {
      try{ return new Date(iso + 'T00:00:00').toLocaleDateString('pt-BR',{day:'2-digit',month:'long',year:'numeric'}) }catch(e){ return iso }
    }

    // Layout variado
    function pickSpan(idx){
      const variants = ['span-6','span-6','span-8','span-4','span-6','span-6','span-8','span-4','span-12'];
      return variants[idx % variants.length];
    }

    function buildGallery(photos, group, startIdx){
      if(!photos || !photos.length) return '';
      const n = photos.length;
      const cls = (i)=> (n===1? 'span-12' : n===2? 'span-6' : n===3? (i===0? 'span-12':'span-6') : 'span-3');
      return `
        <div class="grid" style="gap:8px; grid-template-columns:repeat(12,1fr); margin-top:10px">
          ${photos.slice(0,4).map((p,i)=>`
            <figure class="media ${cls(i)}" data-group="${group}" data-idx="${startIdx + i}">
              <img src="${p.url}" alt=""/>
              ${p.caption?`<figcaption class="cap">${p.caption}</figcaption>`:''}
            </figure>
          `).join('')}
        </div>
      `;
    }

    function cardTemplate(ev, idx){
      const span = pickSpan(idx);
      const hero = ev.photos && ev.photos[0] ? `
        <div class="media" data-group="${ev.id}" data-idx="0">
          <img src="${ev.photos[0].url}" alt=""/>
          ${ev.photos[0].caption?`<div class="cap">${ev.photos[0].caption}</div>`:''}
        </div>
      ` : '';

      const tags = (ev.tags||[]).slice(0,4).map(t=>`<span class="tag">#${t}</span>`).join(' ');
      const gallery = ev.photos && ev.photos.length>1 ? buildGallery(ev.photos.slice(1), ev.id, 1) : '';

      return `
        <article class="card ${span}" data-year="${ev.year}" data-date="${ev.date}" data-search="${[ev.title,ev.location,ev.paragraph,(ev.tags||[]).join(' ')].join(' ').toLowerCase()}">
          ${hero}
          <div class="card-inner">
            <div class="meta">
              <span>üìÖ ${fmtDate(ev.date)}</span>
              ${ev.location?`<span>‚Ä¢ üìç ${ev.location}</span>`:''}
              <span>‚Ä¢ üéì ${ev.year}</span>
            </div>
            <div class="title">${ev.title||'Evento sem t√≠tulo'}</div>
            <p class="desc">${ev.paragraph||''}</p>
            <div style="margin-top:8px; display:flex; gap:8px; flex-wrap:wrap">${tags}</div>
            ${gallery}
          </div>
        </article>
      `;
    }

    function renderYears(list){
      const years = [...new Set(list.map(e=>e.year))].sort();
      const wrap = document.getElementById('years');
      wrap.innerHTML = ['Todos', ...years].map((y,i)=>`<button class="chip ${i===0?'active':''}" data-y="${y}">${y}</button>`).join('');
      wrap.querySelectorAll('.chip').forEach(btn=>{
        btn.addEventListener('click',()=>{
          wrap.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
          btn.classList.add('active');
          filterByYear(btn.dataset.y);
          window.scrollTo({top: document.querySelector('header').offsetHeight, behavior:'smooth'});
        })
      })
    }

    function renderGrid(list){
      const grid = document.getElementById('grid');
      grid.innerHTML = list.map(cardTemplate).join('');
    }

    function filterByYear(y){
      const cards = [...document.querySelectorAll('#grid .card')];
      cards.forEach(c=>{
        const show = (y==='Todos' || c.dataset.year===y);
        c.style.display = show ? '' : 'none';
      })
    }

    function applySearch(){
      const q = document.getElementById('q').value.trim().toLowerCase();
      const cards = [...document.querySelectorAll('#grid .card')];
      cards.forEach(c=>{
        const hay = c.getAttribute('data-search');
        c.style.display = hay.includes(q) ? '' : 'none';
      })
    }

    function applySort(mode){
      const grid = document.getElementById('grid');
      const cards = [...grid.children];
      const by = {
        new:(a,b)=> new Date(b.dataset.date) - new Date(a.dataset.date),
        old:(a,b)=> new Date(a.dataset.date) - new Date(b.dataset.date),
        az:(a,b)=> a.querySelector('.title').textContent.localeCompare(b.querySelector('.title').textContent),
        za:(a,b)=> b.querySelector('.title').textContent.localeCompare(a.querySelector('.title').textContent)
      }[mode] || (()=>0);
      cards.sort(by).forEach(c=>grid.appendChild(c));
    }

    // Intera√ß√µes b√°sicas
    document.getElementById('q').addEventListener('input', applySearch);
    document.getElementById('sort').addEventListener('change', e=>applySort(e.target.value));
    document.getElementById('print').addEventListener('click', ()=>window.print());

    // LIGHTBOX
    (function(){
      const lb = {
        el: document.getElementById('lightbox'),
        img: document.getElementById('lbImg'),
        cap: document.getElementById('lbCap'),
        idx: 0, list: []
      };
      function open(list, idx=0){
        lb.list = list; lb.idx = idx;
        const it = lb.list[lb.idx]; if(!it) return;
        lb.img.src = it.url; lb.cap.textContent = it.cap || '';
        lb.el.classList.add('open');
      }
      function close(){ lb.el.classList.remove('open'); }
      function next(){ lb.idx = (lb.idx+1)%lb.list.length; open(lb.list, lb.idx); }
      function prev(){ lb.idx = (lb.idx-1+lb.list.length)%lb.list.length; open(lb.list, lb.idx); }

      document.getElementById('lbClose').addEventListener('click', close);
      document.getElementById('lbNext').addEventListener('click', next);
      document.getElementById('lbPrev').addEventListener('click', prev);
      document.addEventListener('keydown', (e)=>{
        if(!lb.el.classList.contains('open')) return;
        if(e.key==='Escape') close();
        if(e.key==='ArrowRight') next();
        if(e.key==='ArrowLeft') prev();
      });
      lb.el.addEventListener('click', (e)=>{ if(e.target.id==='lightbox') close(); });

      // Delega√ß√£o de clique: qualquer .media abre galeria do card
      document.addEventListener('click', (e)=>{
        const m = e.target.closest('.media');
        if(!m) return;
        const card = m.closest('.card');
        const medias = [...card.querySelectorAll('.media')];
        const list = medias.map(el=>({
          url: (el.querySelector('img')||{}).src,
          cap: (el.querySelector('.cap')||{}).textContent || ''
        })).filter(i=>!!i.url);
        const idx = Math.max(0, medias.indexOf(m));
        open(list, idx);
      });
    })();

    // Exemplo r√°pido (pode remover o bot√£o depois)
    document.getElementById('addSample').addEventListener('click', ()=>{
      if(events.length>1){ alert('Exemplos j√° adicionados.'); return; }
      events.push({
        id:'ev-2025-08-jogos',
        title:'Jogos Universit√°rios 2025',
        date:'2025-08-10',
        location:'Gin√°sio Municipal',
        year:'2025',
        paragraph:'Participa√ß√£o dos acad√™micos em modalidades coletivas, promovendo integra√ß√£o entre cursos e desenvolvimento de lideran√ßa e trabalho em equipe.',
        tags:['esporte','integra√ß√£o'],
        photos:[
          {url:'assets/2025/jogos-2025-1-01.jpg', caption:'Entrada das equipes.'},
          {url:'assets/2025/jogos-2025-1-02.jpg', caption:'Jogo de v√¥lei decisivo.'},
          {url:'assets/2025/jogos-2025-1-03.jpg', caption:'Torcida nas arquibancadas.'},
          {url:'assets/2025/jogos-2025-1-04.jpg', caption:'Premia√ß√£o das equipes.'}
        ]
      });
      boot();
      document.querySelector('.chip[data-y="Todos"]').click();
    });

    function boot(){
      renderGrid(events);
      renderYears(events);
      applySort('new');
    }
    document.getElementById('yearNow').textContent = new Date().getFullYear();
    boot();
  </script>
</body>
</html>
